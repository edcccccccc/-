<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>传感器习题集刷题工具</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", sans-serif;
            background: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
            text-align: center;
        }

        .stats {
            display: flex;
            justify-content: space-around;
            background: white;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-item {
            text-align: center;
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 18px;
            font-weight: bold;
            color: #2196F3;
        }

        .chapters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .chapter-btn {
            padding: 8px 16px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .chapter-btn:hover {
            border-color: #2196F3;
        }

        .chapter-btn.active {
            background: #2196F3;
            color: white;
            border-color: #2196F3;
        }

        .question-card {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .question-type {
            background: #e3f2fd;
            color: #2196F3;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 14px;
            font-weight: bold;
        }

        .question-number {
            color: #666;
            font-size: 14px;
        }

        .question-content {
            font-size: 16px;
            margin-bottom: 20px;
            line-height: 1.8;
        }

        .highlight {
            background-color: #fff9c4;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: bold;
        }

        .options {
            margin: 20px 0;
        }

        .option-item {
            padding: 12px 15px;
            margin: 8px 0;
            background: #f9f9f9;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .option-item:hover {
            border-color: #2196F3;
            background: #f0f7ff;
        }

        .option-item.selected {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .option-item.correct {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .option-item.incorrect {
            border-color: #f44336;
            background: #ffebee;
        }

        .option-mark {
            display: inline-block;
            width: 24px;
            height: 24px;
            line-height: 24px;
            text-align: center;
            background: #e0e0e0;
            border-radius: 50%;
            margin-right: 10px;
            font-weight: bold;
        }

        .fill-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            margin: 15px 0;
            font-family: inherit;
        }

        .fill-input:focus {
            outline: none;
            border-color: #2196F3;
        }

        .result-box {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
            animation: fadeIn 0.3s;
        }

        .result-box.correct {
            background: #e8f5e9;
            border: 1px solid #c8e6c9;
            color: #2e7d32;
        }

        .result-box.incorrect {
            background: #ffebee;
            border: 1px solid #ffcdd2;
            color: #c62828;
        }

        .result-box.show {
            display: block;
        }

        .answer-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            margin: 20px 0;
        }

        .answer-content {
            white-space: pre-line;
            line-height: 1.8;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-prev {
            background: #f5f5f5;
            color: #333;
        }

        .btn-submit {
            background: #333;
            color: white;
        }

        .btn-next {
            background: #4CAF50;
            color: white;
        }

        .btn:hover:not(:disabled) {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .multi-hint {
            text-align: center;
            color: #666;
            font-style: italic;
            margin: 10px 0;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .question-card {
                padding: 15px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>传感器习题集刷题工具</h1>
        </div>

        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">当前章节</div>
                <div class="stat-value" id="currentChapter">第1章</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">题目进度</div>
                <div class="stat-value" id="progress">1/44</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">已掌握</div>
                <div class="stat-value" id="mastered">0/44</div>
            </div>
        </div>

        <div class="chapters" id="chaptersContainer">
            <!-- 章节按钮由JavaScript动态生成 -->
        </div>

        <div class="question-card">
            <div class="question-header">
                <span class="question-type" id="questionType">单选题</span>
                <span class="question-number" id="questionNumber">第1题</span>
            </div>

            <div class="question-content" id="questionText"></div>

            <!-- 选择题选项区域 -->
            <div class="options" id="optionsContainer"></div>

            <!-- 填空题输入区域 -->
            <div id="fillContainer" style="display: none;">
                <input type="text" class="fill-input" id="fillAnswer" placeholder="请输入答案...">
            </div>

            <!-- 多选题提示 -->
            <div class="multi-hint" id="multiHint" style="display: none;">
                注：本题为多选题，可选择多个答案
            </div>

            <!-- 结果提示框 -->
            <div class="result-box" id="resultBox"></div>

            <!-- 解答题答案区域 -->
            <div class="answer-box" id="answerBox" style="display: none;">
                <div class="answer-content" id="answerContent"></div>
            </div>

            <div class="controls">
                <button class="btn btn-prev" onclick="prevQuestion()" id="prevBtn">上一题</button>
                <button class="btn btn-submit" onclick="submitAnswer()" id="submitBtn">提交答案</button>
                <button class="btn btn-next" onclick="nextQuestion()" id="nextBtn">下一题</button>
            </div>
        </div>
    </div>

    <script>
        // ===== 题库数据 =====
        const questionBank = {
            "第1章 概述": [
                {
                    type: "single",
                    q: "下列不属于生物传感器的是",
                    options: ["A. 催化传感器", "B. 免疫传感器", "C. 微生物传感器", "D. 酶传感器"],
                    answer: "A"
                },
                {
                    type: "single",
                    q: "热电偶可以用于测量下列哪种场景温度？",
                    options: [
                        "A. 电子设备工作环境温度",
                        "B. 硅酸盐工业产品生产过程温度",
                        "C. 办公环境温度",
                        "D. 水产养殖环境温度"
                    ],
                    answer: "B"
                },
                {
                    type: "single",
                    q: "光电倍增管可以测量下列哪个物理量？",
                    options: ["A. 位移", "B. 磁场强度", "C. 核辐射", "D. 车间光照强度"],
                    answer: "C"
                },
                {
                    type: "essay",
                    q: "什么是传感器？",
                    a: "传感器是能够感受<span class='highlight'>规定的被测量</span>并按照一定规律转换成可用输出信号的器件和装置。"
                },
                {
                    type: "essay",
                    q: "传感器由哪几部分组成？",
                    a: "传感器由<span class='highlight'>敏感元件</span>、<span class='highlight'>转换元件</span>、<span class='highlight'>基本电路</span>组成。"
                }
            ],
            "第2章 传感器的基本特性": [
                {
                    type: "multi",
                    q: "下列选项，属于传感器静态特性的是：",
                    options: [
                        "A. 线性度、重复性",
                        "B. 精度、温度漂移",
                        "C. 零点漂移、超调量",
                        "D. 稳态误差、迟滞"
                    ],
                    answer: ["A", "B", "D"]
                },
                {
                    type: "essay",
                    q: "什么是传感器的静态特性？",
                    a: "静特性是当输入量为<span class='highlight'>常数或变化极慢</span>时，传感器的输入输出特性。"
                }
            ],
            "第3章 电阻应变式传感器": [
                {
                    type: "multi",
                    q: "电阻应变传感器可以检测下列哪些物理量？",
                    options: ["A. 位移", "B. 厚度", "C. 液位", "D. 压力"],
                    answer: ["A", "D"]
                }
            ],
            "第4章 电容式传感器": [
                {
                    type: "multi",
                    q: "电容传感器可以测量下列哪些物理量？",
                    options: ["A. 位移", "B. 液位", "C. 厚度", "D. 介质类型", "E. 频率"],
                    answer: ["A", "B", "C", "D"]
                }
            ],
            "第5章 电感式传感器": [
                {
                    type: "multi",
                    q: "涡流传感器可以检测下列哪些物理量？",
                    options: ["A. 位移", "B. 厚度", "C. 温度", "D. 压强", "E. 材料种类", "F. 液位"],
                    answer: ["A", "B", "E", "F"]
                }
            ],
            "第6章 磁电式传感器": [
                {
                    type: "multi",
                    q: "霍尔传感器可以测量下列哪些物理量？",
                    options: ["A. 位移", "B. 角度", "C. 电流", "D. 磁场", "E. 压强"],
                    answer: ["A", "B", "C", "D"]
                }
            ],
            "第7章 压电式传感器": [
                {
                    type: "multi",
                    q: "压电式传感器可以测量下列哪些物理量？",
                    options: ["A. 加速度", "B. 动态力", "C. 静态力", "D. 磁场"],
                    answer: ["A", "B"]
                }
            ],
            "第8章 光电效应及器件": [
                {
                    type: "essay",
                    q: "什么是内光电效应？什么是外光电效应？",
                    a: "<span class='highlight'>内光电效应</span>：光线照在物体上，使物体的电导率发生变化，或产生光生电动势的现象。<br><span class='highlight'>外光电效应</span>：在光线作用下，物体内的电子逸出物体表面向外发射的现象。"
                }
            ],
            "第9章 新型光电传感器": [
                {
                    type: "fill",
                    q: "光纤传感器一般可分为：______ 和 ______",
                    a: "功能型传感器、非功能型传感器"
                }
            ],
            "第10章 综合测试": [
                {
                    type: "multi",
                    q: "下列说法错误的是？",
                    options: [
                        "A. 传感器只能输出电信号",
                        "B. 一个传感器只能感受一种信号",
                        "C. 人脸识别系统没有用到传感器",
                        "D. 传感器输出的信号一定有规律"
                    ],
                    answer: ["A", "B", "C", "D"]
                }
            ]
        };

        // ===== 全局变量 =====
        let currentChapter = "第1章 概述";
        let currentQuestionIndex = 0;
        let selectedOptions = new Set();
        let masteredQuestions = new Set();
        let showAnswerMode = false; // 新增：控制解答题答案显示

        // ===== 初始化 =====
        function init() {
            // 初始化章节按钮
            initChapters();
            // 加载第一题
            loadQuestion();
            // 更新统计
            updateStats();
        }

        // ===== 初始化章节按钮 =====
        function initChapters() {
            const container = document.getElementById("chaptersContainer");
            container.innerHTML = "";
            
            Object.keys(questionBank).forEach(chapter => {
                const btn = document.createElement("button");
                btn.className = "chapter-btn";
                btn.textContent = chapter;
                btn.onclick = () => switchChapter(chapter);
                container.appendChild(btn);
            });
            
            updateChapterButtons();
        }

        // ===== 更新章节按钮状态 =====
        function updateChapterButtons() {
            document.querySelectorAll(".chapter-btn").forEach(btn => {
                btn.classList.remove("active");
                if (btn.textContent === currentChapter) {
                    btn.classList.add("active");
                }
            });
        }

        // ===== 切换章节 =====
        function switchChapter(chapter) {
            currentChapter = chapter;
            currentQuestionIndex = 0;
            selectedOptions.clear();
            showAnswerMode = false; // 重置答案显示状态
            updateChapterButtons();
            loadQuestion();
            updateStats();
        }

        // ===== 加载题目 =====
        function loadQuestion() {
            const questions = questionBank[currentChapter];
            const question = questions[currentQuestionIndex];
            
            if (!question) return;
            
            // 更新题目信息
            document.getElementById("questionText").innerHTML = question.q;
            document.getElementById("currentChapter").textContent = currentChapter;
            document.getElementById("questionNumber").textContent = `第${currentQuestionIndex + 1}题`;
            
            // 重置显示状态
            document.getElementById("optionsContainer").innerHTML = "";
            document.getElementById("fillContainer").style.display = "none";
            document.getElementById("answerBox").style.display = "none";
            document.getElementById("resultBox").style.display = "none";
            document.getElementById("multiHint").style.display = "none";
            selectedOptions.clear();
            
            // 根据题型显示不同内容
            if (question.type === "single" || question.type === "multi") {
                document.getElementById("questionType").textContent = question.type === "single" ? "单选题" : "多选题";
                document.getElementById("submitBtn").textContent = "提交答案";
                
                if (question.type === "multi") {
                    document.getElementById("multiHint").style.display = "block";
                }
                
                createOptions(question);
                
            } else if (question.type === "fill") {
                document.getElementById("questionType").textContent = "填空题";
                document.getElementById("fillContainer").style.display = "block";
                document.getElementById("fillAnswer").value = "";
                document.getElementById("submitBtn").textContent = "提交答案";
                
            } else if (question.type === "essay") {
                document.getElementById("questionType").textContent = "解答题";
                document.getElementById("submitBtn").textContent = showAnswerMode ? "隐藏答案" : "查看答案";
                
                // 根据showAnswerMode状态显示或隐藏答案
                if (showAnswerMode) {
                    document.getElementById("answerBox").style.display = "block";
                    document.getElementById("answerContent").innerHTML = question.a;
                } else {
                    document.getElementById("answerBox").style.display = "none";
                }
            }
            
            updateStats();
        }

        // ===== 创建选项 =====
        function createOptions(question) {
            const container = document.getElementById("optionsContainer");
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement("div");
                optionDiv.className = "option-item";
                optionDiv.innerHTML = `
                    <span class="option-mark">${String.fromCharCode(65 + index)}</span>
                    ${option}
                `;
                
                if (question.type === "single") {
                    optionDiv.onclick = () => {
                        document.querySelectorAll(".option-item").forEach(item => {
                            item.classList.remove("selected");
                        });
                        optionDiv.classList.add("selected");
                        selectedOptions.clear();
                        selectedOptions.add(String.fromCharCode(65 + index));
                    };
                } else {
                    optionDiv.onclick = () => {
                        optionDiv.classList.toggle("selected");
                        const letter = String.fromCharCode(65 + index);
                        if (optionDiv.classList.contains("selected")) {
                            selectedOptions.add(letter);
                        } else {
                            selectedOptions.delete(letter);
                        }
                    };
                }
                
                container.appendChild(optionDiv);
            });
        }

        // ===== 提交答案 =====
        function submitAnswer() {
            const questions = questionBank[currentChapter];
            const question = questions[currentQuestionIndex];
            const resultBox = document.getElementById("resultBox");
            
            if (question.type === "single" || question.type === "multi") {
                // 选择题
                if (selectedOptions.size === 0) {
                    alert("请先选择答案");
                    return;
                }
                
                const userAnswer = Array.from(selectedOptions).sort().join("");
                const correctAnswer = Array.isArray(question.answer) ? question.answer.sort().join("") : question.answer;
                
                if (userAnswer === correctAnswer) {
                    resultBox.innerHTML = "<strong>✓ 回答正确！</strong>";
                    resultBox.className = "result-box correct";
                    masteredQuestions.add(`${currentChapter}_${currentQuestionIndex}`);
                } else {
                    resultBox.innerHTML = `<strong>✗ 答案不正确</strong><br><br>正确答案：<strong>${Array.isArray(question.answer) ? question.answer.join("、") : question.answer}</strong>`;
                    resultBox.className = "result-box incorrect";
                    highlightCorrectOptions(question);
                }
                
                resultBox.style.display = "block";
                
            } else if (question.type === "fill") {
                // 填空题
                const userAnswer = document.getElementById("fillAnswer").value.trim();
                const correctAnswer = question.a;
                
                if (!userAnswer) {
                    alert("请输入答案");
                    return;
                }
                
                if (userAnswer === correctAnswer) {
                    resultBox.innerHTML = "<strong>✓ 回答正确！</strong>";
                    resultBox.className = "result-box correct";
                    masteredQuestions.add(`${currentChapter}_${currentQuestionIndex}`);
                } else {
                    resultBox.innerHTML = `<strong>✗ 答案不正确</strong><br><br>正确答案：<strong>${correctAnswer}</strong>`;
                    resultBox.className = "result-box incorrect";
                }
                
                resultBox.style.display = "block";
                
            } else if (question.type === "essay") {
                // 解答题：切换答案显示状态
                showAnswerMode = !showAnswerMode;
                if (showAnswerMode) {
                    // 显示答案时标记为已掌握
                    masteredQuestions.add(`${currentChapter}_${currentQuestionIndex}`);
                }
                loadQuestion(); // 重新加载题目以更新显示状态
            }
            
            updateStats();
        }

        // ===== 高亮正确答案 =====
        function highlightCorrectOptions(question) {
            const options = document.querySelectorAll(".option-item");
            const correctAnswers = Array.isArray(question.answer) ? question.answer : [question.answer];
            
            options.forEach(option => {
                const letter = option.querySelector(".option-mark").textContent;
                if (correctAnswers.includes(letter)) {
                    option.classList.add("correct");
                } else if (option.classList.contains("selected")) {
                    option.classList.add("incorrect");
                }
            });
        }

        // ===== 题目导航 =====
        function prevQuestion() {
            const questions = questionBank[currentChapter];
            
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
            } else {
                const chapters = Object.keys(questionBank);
                const currentIndex = chapters.indexOf(currentChapter);
                if (currentIndex > 0) {
                    currentChapter = chapters[currentIndex - 1];
                    currentQuestionIndex = questionBank[currentChapter].length - 1;
                    updateChapterButtons();
                }
            }
            
            selectedOptions.clear();
            showAnswerMode = false; // 重置答案显示状态
            loadQuestion();
        }

        function nextQuestion() {
            const questions = questionBank[currentChapter];
            
            if (currentQuestionIndex < questions.length - 1) {
                currentQuestionIndex++;
            } else {
                const chapters = Object.keys(questionBank);
                const currentIndex = chapters.indexOf(currentChapter);
                if (currentIndex < chapters.length - 1) {
                    currentChapter = chapters[currentIndex + 1];
                    currentQuestionIndex = 0;
                    updateChapterButtons();
                }
            }
            
            selectedOptions.clear();
            showAnswerMode = false; // 重置答案显示状态
            loadQuestion();
        }

        // ===== 更新统计信息 =====
        function updateStats() {
            const chapters = Object.keys(questionBank);
            let totalQuestions = 0;
            let globalIndex = 0;
            
            // 计算总题数和当前全局索引
            for (let i = 0; i < chapters.length; i++) {
                const count = questionBank[chapters[i]].length;
                totalQuestions += count;
                
                if (chapters[i] === currentChapter) {
                    for (let j = 0; j < i; j++) {
                        globalIndex += questionBank[chapters[j]].length;
                    }
                    globalIndex += currentQuestionIndex + 1;
                }
            }
            
            document.getElementById("progress").textContent = `${globalIndex}/${totalQuestions}`;
            document.getElementById("mastered").textContent = `${masteredQuestions.size}/${totalQuestions}`;
        }

        // ===== 键盘快捷键 =====
        document.addEventListener("keydown", function(e) {
            switch(e.key) {
                case "ArrowLeft":
                    prevQuestion();
                    break;
                case "ArrowRight":
                    nextQuestion();
                    break;
                case "Enter":
                    submitAnswer();
                    break;
                case " ": // 空格键也用于提交
                    submitAnswer();
                    e.preventDefault(); // 防止页面滚动
                    break;
            }
        });

        // ===== 页面加载完成后初始化 =====
        window.onload = init;
    </script>
</body>
</html>
