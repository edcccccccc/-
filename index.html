<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>传感器习题集 - 刷题练习</title>

<style>
body {
    margin: 0;
    background: #f2f2f2;
    font-family: "Microsoft YaHei", sans-serif;
    padding-bottom: 60px;
}

/* 顶部标题 */
.header {
    background: #fff;
    padding: 16px;
    text-align: center;
    font-size: 18px;
    font-weight: bold;
    color: #333;
    border-bottom: 1px solid #ddd;
}

/* 章节栏 */
.chapter-bar {
    display: flex;
    overflow-x: auto;
    background: #fff;
    border-bottom: 1px solid #ddd;
}

.chapter-btn {
    padding: 12px 16px;
    font-size: 14px;
    white-space: nowrap;
    cursor: pointer;
    border-bottom: 2px solid transparent;
}

.chapter-btn.active {
    color: #1976d2;
    border-bottom: 2px solid #1976d2;
    font-weight: bold;
}

/* 题目卡片 */
.card {
    background: #fff;
    margin: 16px;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
}

.question-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 12px;
    border-bottom: 1px solid #eee;
}

.type {
    font-size: 14px;
    color: #666;
    padding: 4px 12px;
    background: #f5f5f5;
    border-radius: 15px;
}

.question-number {
    font-size: 14px;
    color: #888;
}

.question {
    font-size: 16px;
    line-height: 1.7;
    margin-bottom: 20px;
    min-height: 60px;
}

.question .blank {
    display: inline-block;
    min-width: 100px;
    height: 32px;
    border-bottom: 2px dashed #1976d2;
    margin: 0 5px;
    vertical-align: middle;
    text-align: center;
    line-height: 32px;
}

/* 填空题输入区域 */
.fill-section {
    margin-top: 20px;
    padding: 15px;
    background: #f9f9f9;
    border-radius: 8px;
    border-left: 4px solid #1976d2;
}

.answer-input {
    width: 100%;
    padding: 12px;
    border: 2px solid #ddd;
    border-radius: 6px;
    font-size: 15px;
    box-sizing: border-box;
    margin-bottom: 15px;
    font-family: "Microsoft YaHei", sans-serif;
}

.answer-input:focus {
    border-color: #1976d2;
    outline: none;
}

/* 解答题答案区域 */
.essay-section {
    margin-top: 20px;
    padding: 15px;
    background: #f8f9fa;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.answer-content {
    white-space: pre-line;
    line-height: 1.6;
    padding: 15px;
    background: #f1f8e9;
    border-radius: 6px;
    margin-top: 10px;
    border-left: 4px solid #4caf50;
}

/* 按钮样式 */
.button-group {
    display: flex;
    gap: 10px;
    margin-top: 20px;
}

.btn {
    flex: 1;
    padding: 12px;
    border: none;
    border-radius: 6px;
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s;
}

.btn-primary {
    background: #1976d2;
    color: white;
}

.btn-primary:hover {
    background: #1565c0;
}

.btn-secondary {
    background: #f5f5f5;
    color: #333;
    border: 1px solid #ddd;
}

.btn-secondary:hover {
    background: #e9e9e9;
}

.btn-success {
    background: #2e7d32;
    color: white;
}

.btn-success:hover {
    background: #1b5e20;
}

/* 提示框 */
.hint-box {
    background: #fff3cd;
    border: 1px solid #ffeaa7;
    border-radius: 8px;
    padding: 15px;
    margin: 15px 0;
    color: #856404;
    display: none;
    animation: fadeIn 0.3s ease;
}

.hint-box.show {
    display: block;
}

.hint-box.correct {
    background: #d4edda;
    border-color: #c3e6cb;
    color: #155724;
}

.hint-box.incorrect {
    background: #f8d7da;
    border-color: #f5c6cb;
    color: #721c24;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

/* 底部按钮 */
.footer {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    background: #fff;
    border-top: 1px solid #ddd;
    padding: 10px;
}

.footer button {
    flex: 1;
    padding: 14px;
    border: none;
    background: none;
    font-size: 15px;
    font-weight: 500;
    color: #333;
}

.footer button:hover {
    background: #f5f5f5;
}

.footer button:nth-child(2) {
    background: #333;
    color: #fff;
    border-radius: 4px;
    margin: 0 10px;
}

.footer button:nth-child(2):hover {
    background: #555;
}

/* 统计信息 */
.stats {
    text-align: center;
    padding: 10px;
    font-size: 14px;
    color: #666;
    background: #fff;
    border-bottom: 1px solid #eee;
}

.stats span {
    margin: 0 15px;
}
</style>
</head>

<body>

<div class="header">传感器习题集刷题工具</div>

<div class="stats">
    当前章节：<span id="currentChapterText">第1章 概述</span> |
    进度：<span id="progressText">1/10</span> |
    正确率：<span id="accuracyText">0%</span>
</div>

<div class="chapter-bar" id="chapters"></div>

<div class="card">
    <div class="question-header">
        <span class="type" id="questionType">填空题</span>
        <span class="question-number" id="questionNumber">第1题</span>
    </div>
    
    <div class="question" id="questionText"></div>
    
    <!-- 填空题部分 -->
    <div class="fill-section" id="fillSection">
        <input type="text" class="answer-input" id="userAnswer" 
               placeholder="请输入答案（多个答案用逗号或顿号分隔）" 
               onkeypress="handleEnterKey(event)">
        
        <div class="hint-box" id="hintBox"></div>
        
        <div class="button-group">
            <button class="btn btn-primary" onclick="submitAnswer()">提交答案</button>
            <button class="btn btn-secondary" onclick="showAnswer()">查看答案</button>
        </div>
    </div>
    
    <!-- 解答题部分 -->
    <div class="essay-section" id="essaySection" style="display: none;">
        <div class="answer-content" id="answerContent"></div>
        <div class="button-group">
            <button class="btn btn-success" onclick="nextQuestion()">下一题</button>
        </div>
    </div>
</div>

<div class="footer">
    <button onclick="prevQuestion()">上一题</button>
    <button onclick="toggleAnswerMode()" id="toggleBtn">切换查看答案</button>
    <button onclick="nextQuestion()">下一题</button>
</div>

<script>
// ===== 题库数据（包含填空题和解答题） =====
const questionBank = {
    "第1章 概述": [
        {
            type: "fill",
            q: "传感器是能够感受______并按照一定规律转换成可用输出信号的器件和装置。",
            a: "规定的被测量"
        },
        {
            type: "fill", 
            q: "传感器由______、______和______三部分组成。",
            a: "敏感元件、转换元件、基本电路"
        },
        {
            type: "fill",
            q: "传感器主要发展趋势包括：______、网络化、数字化、______、微型化、智能化等。",
            a: "集成化、多功能化"
        },
        {
            type: "essay",
            q: "简述传感器主要发展趋势。",
            a: "现代传感器正朝着集成化、网络化、数字化、多功能化、微型化、智能化光机电一体化方向发展，具有高精度、高性能、高灵敏度、高可靠性、高稳定性、长寿命、高信噪比、宽量程、无维护的特点。发展趋势总体表现为发展、利用新效应，开发新材料，提高传感器的性能和检测范围。"
        },
        {
            type: "essay",
            q: "空调和电冰箱中采用了哪些传感器？它们分别起到什么作用？",
            a: "空调传感器：温度传感器检测室内/室外环境温度、蒸发器温度等，控制压缩机启停和风机速度；红外传感器接收遥控信号。\n\n电冰箱传感器：温度传感器监测冷藏/冷冻室温度，控制压缩机启停和除霜。"
        }
    ],
    "第2章 传感器的基本特性": [
        {
            type: "fill",
            q: "传感器的静态特性是指当输入量为______时的输入输出特性。",
            a: "常数或变化极慢"
        },
        {
            type: "fill",
            q: "静态特性的主要指标包括：线性度、______、重复性、______、稳定性等。",
            a: "迟滞、分辨力"
        },
        {
            type: "fill",
            q: "线性度是将近似后的______与实际曲线进行比较的最大偏差。",
            a: "拟合直线"
        },
        {
            type: "essay",
            q: "传感器的静态特性是什么？由哪些性能指标描述？",
            a: "静特性是当输入量为常数或变化极慢时，传感器的输入输出特性。其主要指标有线性度、迟滞、重复性、分辨力、稳定性、温度稳定性、各种抗干扰稳定性。"
        },
        {
            type: "essay", 
            q: "传感器的标定与校准有什么不同？",
            a: "标定是通过实验或计算确定传感器的测量量和真实值之间的关系，建立输出量与输入量的对应关系。适用于较高精度的仪器，通常在使用前进行。\n\n校准在使用前或使用过程中，通过已知的标准量对传感器进行调整，使其输出更加准确。属于强制性检定之外的测量装置，如非强制性检定的计量器具。"
        }
    ],
    "第3章 电阻应变式传感器": [
        {
            type: "fill",
            q: "导体因变形而使其电阻值发生变化的现象称为______。",
            a: "电阻应变效应"
        },
        {
            type: "fill",
            q: "金属应变片利用______效应，半导体应变片利用______效应。",
            a: "应变、压阻"
        },
        {
            type: "essay",
            q: "何为电阻应变效应？怎样利用这种效应制成应变片？",
            a: "导体在受到拉力或压力的外界力作用时，会产生机械变形，同时机械变形会引起导体阻值的变化，这种导体材料因变形而使其电阻值发生变化的现象称为电阻应变效应。\n\n当外力作用时，导体的电阻率、长度、截面积都会发生变化，从而引起电阻值的变化，通过测量电阻值的变化，检测出外界作用力的大小。"
        },
        {
            type: "essay",
            q: "金属应变片与半导体应变片在工作原理上有何不同？",
            a: "金属导体应变片的电阻变化是利用机械形变产生的应变效应，对于半导体而言，应变传感器主要是利用半导体材料的压阻效应。\n\n金属电阻丝的灵敏系数可近似写为 K≈1+2μ，即约2；半导体灵敏系数近似为 K≈πE，约50～100。"
        }
    ],
    "第4章 电容式传感器": [
        {
            type: "fill",
            q: "为改善单极式变极距型电容传感器的非线性，通常采用______结构。",
            a: "差动"
        },
        {
            type: "essay",
            q: "如何改善单极式变极距型电容传感器的非线性？",
            a: "非线性随相对位移的增加而增加，为保证线性度应限制相对位移的大小，即限制量程大小；起始极距与灵敏度、线性度相矛盾，所以变极距式电容传感器只适合小位移测量，限制初始极距的大小；为提高传感器的灵敏度和改善非线性关系，变极距式电容传感器一般采用差动结构。"
        },
        {
            type: "essay",
            q: "为什么高频工作时的电容式传感器连接电缆的长度不能任意变化？",
            a: "低频时容抗较大，传输线的等效电感和电阻可忽略。而高频时容抗减小，等效电感和电阻不可忽略，这时接在传感器输出端相当于一个串联谐振，有一个谐振频率存在，当工作频率接近谐振频率时，串联谐振阻抗最小，电流最大，谐振对传感器的输出起破坏作用，使电路不能正常工作。通常工作频率10MHz以上就要考虑电缆线等效电感的影响。"
        }
    ],
    "第5章 电感式传感器": [
        {
            type: "fill",
            q: "电感式传感器利用线圈______和______的变化实现非电量电测。",
            a: "自感、互感"
        },
        {
            type: "fill",
            q: "提高电感式传感器线性度的有效方法是采用______形式和______电路。",
            a: "差动、相敏检波"
        },
        {
            type: "fill",
            q: "金属导体在变化磁场中产生的闭合电流称为______。",
            a: "电涡流"
        },
        {
            type: "essay",
            q: "何谓电感式传感器？电感式传感器分为哪几类？",
            a: "电感式传感器是一种机-电转换装置，电感式传感器是利用线圈自感和互感的变化实现非电量电测的一种装置，传感器利用电磁感应定律将被测非电量转换为电感或互感的变化。\n\n电感式传感器种类：自感式、涡流式、差动式、变压式等。"
        }
    ],
    "第6章 磁电式传感器": [
        {
            type: "fill",
            q: "磁电感应式传感器的工作原理基于______定律。",
            a: "电磁感应"
        },
        {
            type: "fill", 
            q: "霍尔效应是指通电导体在磁场中，在______方向产生感应电动势的现象。",
            a: "与电流和磁场都垂直"
        },
        {
            type: "essay",
            q: "试述磁电感应式传感器的工作原理和结构形式。",
            a: "磁电感应式传感器的工作原理基于电磁感应定律，当导体在磁场中运动切割磁力线或线圈中的磁通发生变化时，导体或线圈中会产生感应电动势。其结构形式主要有动圈式和动铁式。"
        }
    ],
    "第7章 压电式传感器": [
        {
            type: "fill",
            q: "电介质在受力变形时产生电荷的现象称为______。",
            a: "压电效应"
        },
        {
            type: "essay",
            q: "什么是压电效应？什么是正压电效应和逆压电效应？",
            a: "某些电介质在沿一定的方向受到外力的作用变形时，由于内部电极化现象同时在两个表面上产生符号相反的电荷，当外力去掉后，恢复到不带电的状态；而当作用力方向改变时，电荷的极性随着改变。正压电效应也称压电效应。对晶体施加一定变电场，晶体本身将产生机械变形，外电场撤离，变形也随之消失，称为逆压电效应。"
        }
    ],
    "第8章 光电效应及器件": [
        {
            type: "fill",
            q: "内光电效应包括______效应和______效应。",
            a: "光电导、光生伏特"
        },
        {
            type: "fill",
            q: "光敏电阻的暗电阻通常为______量级。",
            a: "0.5～200MΩ"
        },
        {
            type: "essay",
            q: "什么是内光电效应？什么是外光电效应？说明其工作原理并指出相应的典型光电器件。",
            a: "内光电效应：当光线照在物体上，使物体的电导率发生变化，或产生光生电动势的现象叫做内光电效应，内光电效应又分为光电导效应和光生伏特效应。入射光强改变物质导电率的物理现象称光电导效应，典型的光电器件有光敏电阻；光照时物体中能产生一定方向电动势的现象叫光生伏特效应，光电池、光敏晶体管。\n\n外光电效应：在光线作用下，物体内的电子逸出物体表面向外发射的现象称为外光电效应，典型的光电器件有光电管、光电倍增管。"
        }
    ],
    "第9章 新型光电传感器": [
        {
            type: "fill",
            q: "CCD主要由______和______组成。",
            a: "MOS光敏元阵列、读出移位寄存器"
        },
        {
            type: "fill",
            q: "光纤传感器分为______型和______型两大类。",
            a: "传光、功能"
        }
    ],
    "第10章 半导体式化学传感器": [
        {
            type: "fill",
            q: "半导体气体传感器是利用半导体材料与气体接触时______变化的原理。",
            a: "电阻或功函数"
        }
    ],
    "第12章 热电式传感器": [
        {
            type: "fill",
            q: "热电偶测温回路的热电势主要由______电势和______电势组成。",
            a: "接触、温差"
        },
        {
            type: "essay", 
            q: "什么是热电效应？热电偶测温回路的热电动势由哪两部分组成？",
            a: "热电效应：两种不同类型的金属导体两端分别接在一起构成闭合回路，当两个结点有温差时，导体回路里有电流流动会产生热电势，这种现象称为热电效应。\n\n热电偶测温回路中热电势主要是由接触电势和温差电势两部分组成。"
        }
    ]
};

// ===== 全局变量 =====
let currentChapter = "第1章 概述";
let currentQuestionIndex = 0;
let showAnswerMode = false; // 是否显示答案模式
let stats = {
    totalAttempts: 0,
    correctAnswers: 0
};

// ===== 初始化章节导航 =====
function initializeChapters() {
    const chapterBar = document.getElementById("chapters");
    chapterBar.innerHTML = "";
    
    const chapters = Object.keys(questionBank);
    chapters.forEach((chapter, index) => {
        const btn = document.createElement("div");
        btn.className = "chapter-btn" + (chapter === currentChapter ? " active" : "");
        btn.textContent = chapter;
        btn.onclick = () => switchChapter(chapter);
        chapterBar.appendChild(btn);
    });
}

// ===== 切换章节 =====
function switchChapter(chapter) {
    currentChapter = chapter;
    currentQuestionIndex = 0;
    showAnswerMode = false;
    document.getElementById("currentChapterText").textContent = chapter;
    
    // 更新章节按钮状态
    document.querySelectorAll(".chapter-btn").forEach(btn => {
        btn.classList.remove("active");
        if (btn.textContent === chapter) {
            btn.classList.add("active");
        }
    });
    
    // 加载题目
    loadQuestion();
    updateProgress();
}

// ===== 加载题目 =====
function loadQuestion() {
    const chapterQuestions = questionBank[currentChapter];
    if (!chapterQuestions || chapterQuestions.length === 0) {
        document.getElementById("questionText").textContent = "本章暂无题目";
        document.getElementById("fillSection").style.display = "none";
        document.getElementById("essaySection").style.display = "none";
        return;
    }
    
    const question = chapterQuestions[currentQuestionIndex];
    
    // 更新题目
    document.getElementById("questionText").textContent = question.q;
    document.getElementById("questionNumber").textContent = `第${currentQuestionIndex + 1}题`;
    
    // 根据题型显示不同内容
    if (question.type === "fill") {
        document.getElementById("questionType").textContent = "填空题";
        document.getElementById("fillSection").style.display = "block";
        document.getElementById("essaySection").style.display = "none";
        document.getElementById("userAnswer").value = "";
        document.getElementById("hintBox").className = "hint-box";
        document.getElementById("hintBox").style.display = "none";
        document.getElementById("toggleBtn").textContent = "查看答案";
        
        // 聚焦输入框
        setTimeout(() => {
            document.getElementById("userAnswer").focus();
        }, 100);
    } else {
        document.getElementById("questionType").textContent = "解答题";
        document.getElementById("fillSection").style.display = "none";
        document.getElementById("essaySection").style.display = "block";
        document.getElementById("answerContent").textContent = showAnswerMode ? question.a : "点击下方按钮查看答案";
        document.getElementById("toggleBtn").textContent = showAnswerMode ? "隐藏答案" : "查看答案";
    }
    
    updateProgress();
}

// ===== 提交答案（填空题） =====
function submitAnswer() {
    const userAnswer = document.getElementById("userAnswer").value.trim();
    const correctAnswer = questionBank[currentChapter][currentQuestionIndex].a;
    
    if (!userAnswer) {
        alert("请输入答案");
        return;
    }
    
    stats.totalAttempts++;
    
    // 答案对比
    const isCorrect = compareAnswers(userAnswer, correctAnswer);
    
    const hintBox = document.getElementById("hintBox");
    if (isCorrect) {
        stats.correctAnswers++;
        hintBox.innerHTML = "<strong>✓ 回答正确！</strong>";
        hintBox.className = "hint-box correct";
        
        // 2秒后自动下一题
        setTimeout(() => {
            nextQuestion();
        }, 2000);
    } else {
        hintBox.innerHTML = `<div style="margin-bottom: 8px;"><strong>✗ 答案不正确</strong></div>
                           <div><strong>正确答案：</strong> ${correctAnswer}</div>`;
        hintBox.className = "hint-box incorrect";
    }
    
    hintBox.style.display = "block";
    updateProgress();
}

// ===== 答案对比函数 =====
function compareAnswers(userAnswer, correctAnswer) {
    // 去除多余空格，统一分隔符
    const user = userAnswer.replace(/\s+/g, '').replace(/，/g, ',').toLowerCase();
    const correct = correctAnswer.replace(/\s+/g, '').replace(/，/g, ',').toLowerCase();
    
    // 直接比较
    if (user === correct) return true;
    
    // 处理多个答案的情况
    if (correct.includes(',')) {
        const correctParts = correct.split(',').filter(p => p);
        const userParts = user.split(',').filter(p => p);
        
        // 检查长度是否相同
        if (correctParts.length !== userParts.length) return false;
        
        // 检查每个部分是否匹配
        for (let i = 0; i < correctParts.length; i++) {
            if (!user.includes(correctParts[i])) return false;
        }
        return true;
    }
    
    // 部分匹配
    return user.includes(correct) || correct.includes(user);
}

// ===== 查看答案（填空题） =====
function showAnswer() {
    const correctAnswer = questionBank[currentChapter][currentQuestionIndex].a;
    const hintBox = document.getElementById("hintBox");
    hintBox.innerHTML = `<div><strong>正确答案：</strong> ${correctAnswer}</div>`;
    hintBox.className = "hint-box";
    hintBox.style.display = "block";
}

// ===== 切换答案模式（解答题） =====
function toggleAnswerMode() {
    const question = questionBank[currentChapter][currentQuestionIndex];
    
    if (question.type === "fill") {
        // 填空题模式：直接查看答案
        showAnswer();
    } else {
        // 解答题模式：切换显示/隐藏答案
        showAnswerMode = !showAnswerMode;
        loadQuestion();
    }
}

// ===== 题目导航 =====
function prevQuestion() {
    const chapterQuestions = questionBank[currentChapter];
    
    if (currentQuestionIndex > 0) {
        currentQuestionIndex--;
    } else {
        // 如果是第一题，转到上一章的最后一题
        const chapters = Object.keys(questionBank);
        const currentIndex = chapters.indexOf(currentChapter);
        if (currentIndex > 0) {
            switchChapter(chapters[currentIndex - 1]);
            const prevChapterQuestions = questionBank[chapters[currentIndex - 1]];
            currentQuestionIndex = prevChapterQuestions.length - 1;
        }
    }
    
    showAnswerMode = false;
    loadQuestion();
}

function nextQuestion() {
    const chapterQuestions = questionBank[currentChapter];
    
    if (currentQuestionIndex < chapterQuestions.length - 1) {
        currentQuestionIndex++;
    } else {
        // 如果是最后一题，转到下一章的第一题
        const chapters = Object.keys(questionBank);
        const currentIndex = chapters.indexOf(currentChapter);
        if (currentIndex < chapters.length - 1) {
            switchChapter(chapters[currentIndex + 1]);
            currentQuestionIndex = 0;
        } else {
            // 如果是最后一章的最后一题，循环回到第一章
            switchChapter(chapters[0]);
            currentQuestionIndex = 0;
        }
    }
    
    showAnswerMode = false;
    loadQuestion();
}

// ===== 更新进度 =====
function updateProgress() {
    const chapterQuestions = questionBank[currentChapter];
    const chapters = Object.keys(questionBank);
    
    // 计算总题数
    let totalQuestions = 0;
    chapters.forEach(chapter => {
        totalQuestions += questionBank[chapter].length;
    });
    
    // 计算当前进度
    const currentChapterIndex = chapters.indexOf(currentChapter);
    let progressCount = 0;
    for (let i = 0; i < currentChapterIndex; i++) {
        progressCount += questionBank[chapters[i]].length;
    }
    progressCount += currentQuestionIndex + 1;
    
    // 计算正确率
    const accuracy = stats.totalAttempts > 0 ? 
        Math.round((stats.correctAnswers / stats.totalAttempts) * 100) : 0;
    
    // 更新显示
    document.getElementById("progressText").textContent = `${progressCount}/${totalQuestions}`;
    document.getElementById("accuracyText").textContent = `${accuracy}%`;
}

// ===== 回车键提交 =====
function handleEnterKey(event) {
    if (event.key === 'Enter') {
        submitAnswer();
    }
}

// ===== 初始化 =====
function initialize() {
    initializeChapters();
    loadQuestion();
    updateProgress();
}

// 页面加载完成后初始化
document.addEventListener('DOMContentLoaded', initialize);

// 键盘快捷键
document.addEventListener('keydown', function(e) {
    switch(e.key) {
        case 'ArrowLeft':
            prevQuestion();
            break;
        case 'ArrowRight':
            nextQuestion();
            break;
        case ' ':
            if (questionBank[currentChapter][currentQuestionIndex].type === "fill") {
                showAnswer();
            } else {
                toggleAnswerMode();
            }
            break;
    }
});
</script>
</body>
</html>
